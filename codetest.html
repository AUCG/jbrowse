<html>
<head></head>
<body>
<script>

var cyto = //a properly formatted text string for testing 
   ["chr1\t34300000\t39600000\tp34.3\tgneg",
    "chr1\t39600000\t43600000\tp34.2\tgpos25",
    "chr1\t46100000\t50100000\tp33\tgpos75",
    "chr1\t55400000\t58300000\tp32.2\tgpos50",
    "chr1\t69100000\t84300000\tp31.1\tgpos100",
    "chr1\t120000000\t123200000\tp11.1\tacen",
    "chr1\t126900000\t140800000\tq12\tgvar",
    "chr1\t140800000\t145900000\tq21.1\tgneg",
    "chr13\t3500000\t7700000\tp12\tstalk",
    "chr13\t7700000\t12600000\tp11.2\tgvar",
    "chrX\t145800000\t153692391\tq28\tgneg"
   ].join('\n');

//document.write("<pre>" + cyto + "</pre>");

var cytobandRegex = // chrom \t chromStart \t chromEnd \t name \t gieStain 
    /(.+)\t(\d+)\t(\d+)\t(.+)\t(gneg|gpos50|gpos75|gpos25|gpos100|acen|gvar|stalk)/;

cytoLines = cyto.split(/\r\n|\r|\n/);

var parseCytoBand = function(line){
    if (match = line.match(cytobandRegex)){ //if it's a match, print it, if not, say so
    
       tmpCytoBand = {
            "chrom" : match[1],
            "chromStart" : match[2],
            "chromEnd" : match[3],
            "name" : match[4],
            "gieStain" : match[5]
        };
        
        console.log(tmpCytoBand);
        return tmpCytoBand;

    } else { 
        return undefined;
    }    
}

cytoHolder = [];
for (var line in cytoLines){
    var toPush = parseCytoBand(cytoLines[line]);
    if (toPush){
        cytoHolder.push(toPush);
    } else {
        console.warn ("Check line " + (parseInt(line)+1) + ", it is incorrectly formatted.");

    }
}

</script>
</body>
</html>
